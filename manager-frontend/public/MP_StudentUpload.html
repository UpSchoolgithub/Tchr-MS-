<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>UpSchool Dashboard</title>
<style>
    * {
        box-sizing: border-box;
        margin: 0; 
        padding: 0;
    }
    body {
        font-family: "Montserrat", sans-serif; 
        font-size: 12px;
        overflow-x: hidden;
    }
    .sidebar {
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        height: 100vh;
        width: 200px;
        background-color: #eeeeee;
        color: white;
        padding: 20px;
        position: fixed;
    }
    .sidebar div {
        display: flex;
        flex-direction: column;
    }
    .sidebar button {
        color: black;
        background: none;
        border: 3px solid transparent;
        padding: 10px;
        width: 100%;
        text-align: left;
        border-radius: 10px;
        font-size: 1rem;
        cursor: pointer;
        transition: all 0.3s ease;
        margin-bottom: 10px;
    }
    .sidebar button:hover {
        background-color: #5A9F68;
        color: white;
    }
    .main-content {
        margin-left: 200px;
        padding: 0.1em;
        background-color: #f4f4f4;
        min-height: 100vh;
    }
    .main-header {
        background-color: #5A9F68;
        color: white;
        padding: 30px 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        width: calc(100% - 0px);
    }
    .search-box input[type="search"] {
        border: none;
        padding: 8px;
        border-radius: 20px;
    }
    .search-box input[type="search"]:focus {
        outline: none;
    }
    img {
        width: 150px;
        height: auto;
    }

    /*Main Content CSS*/

    .table-container {
        height: calc(100vh - 180px);
        overflow-y: auto;
        margin-top: 20px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    table {
        width: 100%;
        border-collapse: collapse;
        background-color: #fff;
    }
    th, td {
        border: 1px solid #ddd;
        padding: 12px;
        text-align: left;
    }
    button {
        padding: 8px 16px;
        background-color: #5A9F68;
        color: white;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        transition: background-color 0.3s;
    }
    button:hover {
        background-color: #417a4c;
    }
    button:focus {
        outline: none;
    }
    thead th {
        position: sticky;
        top: 0;
        background-color: white;
        z-index: 10;
    }
    th:first-child, td:first-child {
        position: sticky;
        left: 0;
        background-color: white;
        z-index: 20;
        min-width: 100px;
    }
    th:nth-child(2), td:nth-child(2) {
        position: sticky;
        left: 80px;
        background-color: white;
        z-index: 20;
        min-width: 140px;
    }
    th:nth-child(n+3), td:nth-child(n+3) {
        z-index: 5;                                 
    }
    tr {
        background-color: white;  /* Ensures entire row is covered */
    }
    td {
        text-align: center;
    }

</style>
</head>
<body>

<div class="sidebar">
    <img src="https://www.up.school/wp-content/themes/upschool/img/logo.svg" alt="UpSchool Logo">
    <div>
        <button onclick="location.href=''">Dashboard</button>
        <button onclick="location.href=''">School Calender</button>
        <button onclick="location.href='MP_PageForTeacherTTandSU.html'">Class Room</button>
        <button onclick="location.href='MP_CreateTeacher.html'">View Teachers</button>
        <button onclick="location.href='activity.html'">Request</button>
    </div>
    <div> 
        <button onclick="location.href='profile.html'">My Profile</button>
        <button onclick="location.href='signout.html'">Sign Out</button>
        <button onclick="location.href='help.html'">Help</button>
    </div>
</div>
  
<div class="main-content">
    <div class="main-header">
        <h2>Welcome, Teacher's Name!</h2>
        <div class="search-box">
            <input type="search" placeholder="Search" />
        </div>
    </div>
    <h1>Upload Student File</h1>
    <input type="file" id="fileInput" accept=".csv">
    <button onclick="uploadFile()">Upload</button>
    <button onclick="showPersonalDetails()">Personal Details</button>
    <button onclick="showAttendance()">Attendance</button>
    <button onclick="showTestResults()">Test</button>
    <button onclick="showAssignments()">Assignments</button>

    <div class="button-container">
        <button id="editBtn" onclick="editTable()">Edit</button>
        <button id="saveBtn" onclick="saveTable()" style="display:none;">Save</button>
    </div>
    

    <div class="table-container">
        <table id="resultsTable">
            <thead>
                <tr>
                    <th>Roll Number</th>
                    <th>Student Name</th>
                </tr>
            </thead>
            <tbody>
                <!-- Rows will be added here dynamically -->
            </tbody>
        </table>
    </div>
</div> 

    <script>
        function uploadFile() {
            const fileInput = document.getElementById('fileInput');
            const file = fileInput.files[0];
        
            if (!file) {
                alert('Please select a file first!');
                return;
            }
        
            const reader = new FileReader();
        
            reader.onload = function(event) {
                const text = event.target.result;
                const rows = text.split('\n'); // Split by new lines
                if (rows.length > 0) {
                    createTableHeader(rows[0]);  // Create table headers from the first row
                    displayData(rows.slice(1));  // Display data starting from the second row
                }
            };
        
            reader.readAsText(file);
        }
        
        function createTableHeader(headerRow) {
            const headers = headerRow.split(',');
            const thead = document.getElementById('resultsTable').getElementsByTagName('thead')[0];
            thead.innerHTML = ''; // Clear existing headers if any
            const row = document.createElement('tr');
            headers.forEach(header => {
                const th = document.createElement('th');
                th.textContent = header.trim();
                row.appendChild(th);
            });
            thead.appendChild(row);
        }
        
        function displayData(rows) {
            const tableBody = document.getElementById('resultsTable').getElementsByTagName('tbody')[0];
            tableBody.innerHTML = ''; // Clear existing entries
        
            rows.forEach(row => {
                if (row.trim() === '') return; // Skip empty rows
                const cells = row.split(','); // Assuming CSV is comma-separated
                const rowElement = document.createElement('tr');
                cells.forEach(cell => {
                    const td = document.createElement('td');
                    td.textContent = cell.trim();
                    rowElement.appendChild(td);
                });
                tableBody.appendChild(rowElement);
            });
        }
        function editTable() {
            const table = document.getElementById('resultsTable');
            for (let i = 0; i < table.rows.length; i++) {
                const row = table.rows[i];
                for (let j = 0; j < row.cells.length; j++) {
                    const cell = row.cells[j];
                    const input = document.createElement('input');
                    input.type = 'text';
                    input.value = cell.textContent.trim();
                    cell.textContent = '';
                    cell.appendChild(input);
                }
            }
            document.getElementById('editBtn').style.display = 'none'; // Hide Edit button
            document.getElementById('saveBtn').style.display = ''; // Show Save button
        }
        
        function saveTable() {
            const table = document.getElementById('resultsTable');
            for (let i = 0; i < table.rows.length; i++) {
                const row = table.rows[i];
                for (let j = 0; j < row.cells.length; j++) {
                    const cell = row.cells[j];
                    const input = cell.children[0];
                    cell.textContent = input.value; // Update textContent to input value
                }
            }
            document.getElementById('editBtn').style.display = ''; // Show Edit button
            document.getElementById('saveBtn').style.display = 'none'; // Hide Save button
        }
        function createTableHeader(headerRow) {
            const headers = headerRow.split(',');
            const thead = document.getElementById('resultsTable').getElementsByTagName('thead')[0];
            thead.innerHTML = ''; // Clear existing headers if any
            const row = document.createElement('tr');
            headers.forEach(header => {
                const th = document.createElement('th');
                th.textContent = header.trim();
                row.appendChild(th);
            });
            thead.appendChild(row);
        }
        function displayData(rows) {
            const tableBody = document.getElementById('resultsTable').getElementsByTagName('tbody')[0];
            tableBody.innerHTML = ''; // Clear existing entries
        
            rows.forEach(row => {
                if (row.trim() === '') return; // Skip empty rows
                const cells = row.split(','); // Assuming CSV is comma-separated
                const rowElement = document.createElement('tr');
                cells.forEach((cell, index) => {
                    const td = document.createElement('td');
                    // Special handling for the Yes/No columns
                    if (index > 1) { // Assuming first two columns are Roll Number and Student Name
                        if (cell.trim() === 'Yes') {
                            td.innerHTML = '&#10003;'; // Unicode check mark
                            td.style.color = 'green';
                        } else if (cell.trim() === 'No') {
                            td.innerHTML = '&#10060;'; // Unicode cross mark
                            td.style.color = 'red';
                        } else {
                            td.innerHTML = ''; // Leave blank
                        }
                    } else {
                        td.textContent = cell.trim();
                    }
                    rowElement.appendChild(td);
                });
                tableBody.appendChild(rowElement);
            });
        }
        
        
    </script>

</body>
</html>
